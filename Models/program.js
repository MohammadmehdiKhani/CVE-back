const Joi = require("joi");
const mongoose = require("mongoose");
const { CVE } = require("./cve");

const express = require("express");

const app = express();

app.use(express.json());
/*
mongoose
  .connect("mongodb://127.0.0.1:27017/CVE")
  .then(() => console.log("connected to DB"))
  .catch((err) => console.log("can not connect to DB"));

app.listen(3001, () => console.log("listening on port 3001"));
*/

const programSchema = new mongoose.Schema({
  cpeName: {
    type: String,
    required: true,
    unique: true,
  },
  cpeId: String,
  title: String,

  cves: [{ type: mongoose.Schema.Types.ObjectId, ref: "CVE" }],
});

const Program = mongoose.model("Program", programSchema);

/*
addPro = async (text) => {
  const p = new Program({
    name: text,
  });
  await p.save();
};

addPro("vs code");
*/

/*validateProgram = (user) => {
  const schema = Joi.object({
    username: Joi.string().min(3).max(50).required(),
    password: Joi.string().min(3).max(300).required(),
    email: Joi.string().min(3).max(300).required().email(),
    programs: Joi.array(),
  });

  const validation = schema.validate(user);
  return validation;
}; */

exports.Program = Program;
//exports.validate = validateProgram;
