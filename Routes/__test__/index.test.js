const app = require("../../app");
const request = require("supertest");

describe("login", () => {
  it("successfull login", async () => {
    const res = await request(app)
      .post("/users/login")
      .send({ username: "yasin", password: "123" });

    console.log("this is status code" + res.statusCode);
    expect(res.statusCode).toEqual(200);
  });

  it("failed login", async () => {
    const res = await request(app)
      .post("/users/login")
      .send({ username: "yasini", password: "123" });

    var keyNames = Object.keys(res);
    expect(res.statusCode).toEqual(400);
    expect(res.body).toEqual({
      error: "کاربری با این نام کاربری ثبت نام نکرده!",
      type: "wrongUsername",
    });
  });
});
